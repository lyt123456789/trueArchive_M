<!DOCTYPE html><html><head>    <meta charset="UTF-8">    <meta http-equiv="X-UA-Compatible" content="IE=edge">    <meta name="renderer" content="webkit">    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">    <meta name="description" content="">    <meta name="keywords" content="">    <!--<link href="/assets-common/css/common.css" rel="stylesheet" type="text/css" media="screen"/>-->	<link href="../../../css/common.css" rel="stylesheet" type="text/css" media="screen"/>        	    <!--[if lt IE 9]><script src="../../../js/jquery-1.11.1.min.js" type="text/javascript"></script><![endif]-->    <!--<script src="/assets-common/js/jquery-1.11.1.min.js" type="text/javascript"></script>-->        <!--[if gte IE 9]><!--><script src="../../../js/jquery-2.1.1.min.js" type="text/javascript"></script><!--<![endif]-->   	<!--<script src="/assets-common/js/jquery-2.1.1.min.js" type="text/javascript"></script>-->    	<!--<link rel="stylesheet" type="text/css" href="/assets-common/plugins/jquery.treeview/css/tree_common.css">-->	<link rel="stylesheet" type="text/css" href="../css/tree_common.css">    <title>Document</title><script>//加载动画!function(t,e,i){var o=["webkit","Moz","ms","O"],r={},n;function a(t,i){var o=e.createElement(t||"div"),r;for(r in i)o[r]=i[r];return o}function s(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}var f=function(){var t=a("style",{type:"text/css"});s(e.getElementsByTagName("head")[0],t);return t.sheet||t.styleSheet}();function l(t,e,i,o){var a=["opacity",e,~~(t*100),i,o].join("-"),s=.01+i/o*100,l=Math.max(1-(1-t)/e*(100-s),t),p=n.substring(0,n.indexOf("Animation")).toLowerCase(),u=p&&"-"+p+"-"||"";if(!r[a]){f.insertRule("@"+u+"keyframes "+a+"{"+"0%{opacity:"+l+"}"+s+"%{opacity:"+t+"}"+(s+.01)+"%{opacity:1}"+(s+e)%100+"%{opacity:"+t+"}"+"100%{opacity:"+l+"}"+"}",f.cssRules.length);r[a]=1}return a}function p(t,e){var r=t.style,n,a;if(r[e]!==i)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(a=0;a<o.length;a++){n=o[a]+e;if(r[n]!==i)return n}}function u(t,e){for(var i in e)t.style[p(t,i)||i]=e[i];return t}function c(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)if(t[r]===i)t[r]=o[r]}return t}function d(t){var e={x:t.offsetLeft,y:t.offsetTop};while(t=t.offsetParent)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}var h={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:1/4,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};function m(t){if(!this.spin)return new m(t);this.opts=c(t||{},m.defaults,h)}m.defaults={};c(m.prototype,{spin:function(t){this.stop();var e=this,i=e.opts,o=e.el=u(a(0,{className:i.className}),{position:i.position,width:0,zIndex:i.zIndex}),r=i.radius+i.length+i.width,s,f;if(t){t.insertBefore(o,t.firstChild||null);f=d(t);s=d(o);u(o,{left:(i.left=="auto"?f.x-s.x+(t.offsetWidth>>1):parseInt(i.left,10)+r)+"px",top:(i.top=="auto"?f.y-s.y+(t.offsetHeight>>1):parseInt(i.top,10)+r)+"px"})}o.setAttribute("aria-role","progressbar");e.lines(o,e.opts);if(!n){var l=0,p=i.fps,c=p/i.speed,h=(1-i.opacity)/(c*i.trail/100),m=c/i.lines;(function y(){l++;for(var t=i.lines;t;t--){var r=Math.max(1-(l+t*m)%c*h,i.opacity);e.opacity(o,i.lines-t,r,i)}e.timeout=e.el&&setTimeout(y,~~(1e3/p))})()}return e},stop:function(){var t=this.el;if(t){clearTimeout(this.timeout);if(t.parentNode)t.parentNode.removeChild(t);this.el=i}return this},lines:function(t,e){var i=0,o;function r(t,o){return u(a(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:o,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*i+e.rotate)+"deg) translate("+e.radius+"px"+",0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(;i<e.lines;i++){o=u(a(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:n&&l(e.opacity,e.trail,i,e.lines)+" "+1/e.speed+"s linear infinite"});if(e.shadow)s(o,u(r("#000","0 0 4px "+"#000"),{top:2+"px"}));s(t,s(o,r(e.color,"0 0 1px rgba(0,0,0,.1)")))}return t},opacity:function(t,e,i){if(e<t.childNodes.length)t.childNodes[e].style.opacity=i}});(function(){function t(t,e){return a("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}var e=u(a("group"),{behavior:"url(#default#VML)"});if(!p(e,"transform")&&e.adj){f.addRule(".spin-vml","behavior:url(#default#VML)");m.prototype.lines=function(e,i){var o=i.length+i.width,r=2*o;function n(){return u(t("group",{coordsize:r+" "+r,coordorigin:-o+" "+-o}),{width:r,height:r})}var a=-(i.width+i.length)*2+"px",f=u(n(),{position:"absolute",top:a,left:a}),l;function p(e,r,a){s(f,s(u(n(),{rotation:360/i.lines*e+"deg",left:~~r}),s(u(t("roundrect",{arcsize:i.corners}),{width:o,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),t("fill",{color:i.color,opacity:i.opacity}),t("stroke",{opacity:0}))))}if(i.shadow)for(l=1;l<=i.lines;l++)p(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=i.lines;l++)p(l);return s(e,f)};m.prototype.opacity=function(t,e,i,o){var r=t.firstChild;o=o.shadow&&o.lines||0;if(r&&e+o<r.childNodes.length){r=r.childNodes[e+o];r=r&&r.firstChild;r=r&&r.firstChild;if(r)r.opacity=i}}}else n=p(e,"animation")})();if(typeof define=="function"&&define.amd)define(function(){return m});else t.Spinner=m}(window,document);//缓存var _cache = [], _recordObj = {result: null}</script></head><body><div id="loading" style="width:100px;height:100px;position: fixed;top:50%;margin-top:-50px;left:50%;margin-left:-50px;background: none;display: none;z-index: 999;">	<div id="load-icon"></div></div><div id="loading_bg" style="width: 100%;height: 100%;position: fixed;top:0;left:0;background: url(../img/opacity-bg.png) repeat;display: none;z-index: 998;"></div><div class="tw-usertree-choice">	<div class="tw-usertree-wrap">		<div class="tw-usertree-tabs">			<ul class="tw-tabs-nav">	            <li class="tw-nav-item tw-active">	            	<a href="javascript: void(0)">本部门</a>	            </li>	            <li class="tw-nav-item">	            	<a href="javascript: void(0)">所有部门</a>	            </li>	            <li class="tw-nav-item">	            	<a href="javascript: void(0)">所有用户</a>	            </li>	            <li class="tw-nav-act"><span onclick="addAll()" class="tw-btn-primary tw-btn-sm">添加全部</span></li>	        </ul>	        <div class="tw-tabs-bd">	            <div class="tw-tab-panel">	            	<div class="tw-panel-cnt">	            		<div class="JS_treeBox">							<ul id="ownOrg" class="tw-usertree-ul filetree"></ul>	            		</div>	            	</div>	            </div>	            <div class="tw-tab-panel">	            	<div class="tw-panel-cnt">						<div class="JS_treeBox">						<div class="tw-usertree-search">	            			<input type="text" id="mc" value="" class="tw-form-text" />	            			<button type="button" id="searchButton" class="tw-btn-primary" onclick="search();"><i class="tw-icon-search"></i> 搜索</button>	            		</div>	            									<ul id="allOrg" class="tw-usertree-ul filetree"></ul>						</div>	            			            	</div>	            </div>	            <div class="tw-tab-panel">	            	<div class="tw-panel-cnt">						所有用户	            	</div>	            </div>	        </div>		</div>	</div>	<div class="tw-usertree-select">		<div class="tw-mod">			<div class="tw-hd">已经选择 <span>(<b id="countNum">0</b>)</span><span class="tw-act" onclick="delAll()">清除全部</span></div>			<div class="tw-bd">				<ul class="tw-usertree-list">					<!--<li data-id="{0A40364D-FFFF-FFFF-9234-EAA1000001F0}"><span>张勇</span> <i class="tw-usertree-del tw-icon-times-circle" onclick="deltree(this,0)"></i></li>-->				</ul>			</div>			<select id="oldSelect" size="20" style="width:100%;height: 290px;border: 1px dashed #C2C2C2" multiple="multiple">				<!--<option value="{0A40364D-FFFF-FFFF-9234-EAA1000001F0}">张勇</option>-->			</select>		</div>	</div></div><!--<script src="/assets-common/plugins/jquery.slimscroll.min.js" type="text/javascript"></script><script type="text/javascript" src="/assets-common/plugins/jquery.treeview/jquery.treeview.js"></script><script type="text/javascript" src="/assets-common/plugins/jquery.treeview/jquery.treeview.async.js"></script><script src="/assets-common/js/common-ui.js" type="text/javascript"></script>--><script src="../../jquery.slimscroll.min.js" type="text/javascript"></script><script type="text/javascript" src="../jquery.treeview.js"></script><script type="text/javascript" src="../jquery.treeview.async.js"></script><script src="../../../js/common-ui.js" type="text/javascript"></script><script src="../function.tree.js" type="text/javascript" charset="utf-8"></script><script type="text/javascript">	$(document).ready(function() {		initLoad('load-icon');				$('.tw-usertree-tabs').tabs();		$('.JS_treeBox').slimScroll({height: '350px'});		$("#ownOrg").treeview({//			   url: "/assets-common/plugins/jquery.treeview/data/own.json"			   url: "../data/own.json"		});		$("#allOrg").treeview({//			   url: "/assets-common/plugins/jquery.treeview/data/tongz-all.json"			   url: "../data/tongz-all.json"		});				//分别绑定span[class=file]的click事件		$('.tw-usertree-ul#ownOrg').on('click','span.file', function(){			var o = $(this);			var id = o.parent("li").attr('id');			openTreeById(_cache['#allOrg'],id);			isTreeClassChecked(id);		})		$('.tw-usertree-ul#allOrg').on('click','span.file', function(){			var o = $(this);			var id = o.parent("li").attr('id');			openTreeById_rightToLeft(_cache['#ownOrg'],id);			isTreeClassChecked(id);		})				//绑定span[class=folder]的click事件		$('.tw-usertree-ul').on('click','span.folder', function(e){			var ev = e || window.event;			var srcAtag = ev.srcElement || ev.target;			var isAtag = false;						if(srcAtag=="javascript:;"){				isAtag = true;			}else{				if(srcAtag.nodeName=="A"){					isAtag = true;				}			}			if( isAtag ){				ev.preventDefault();				ev.stopPropagation();			}else{				_loading('loading', 'show');				_recordObj.tmpObj = $(this);								$.ajax({//loading异步					type:"get",					url:"../data/async.json?t=" + new Date().getTime(),					async:true,					success:function(){						var o = _recordObj.tmpObj;						if(!o.parent("li").hasClass("hasChildren")){//空目录							_loading('loading', 'hide');							return false;						}						var id = o.parent("li").attr('id');						if(id=="0") {							_loading('loading', 'hide');							return false;						}						isTreeClassChecked(id, false);						getJsonById(_cache['#allOrg'],id);						var result = getIdListFromJson(_recordObj.result.children,[id]);						var span;						$.each(result, function(i, e) {							var tmp = $(".tw-usertree-tabs").find("li[id='"+e+"']").find("span.file");							if(tmp.length>0){								span = tmp;							}							openTreeById(_cache['#allOrg'], e);							openTreeById_rightToLeft(_cache['#ownOrg'], e);							if(o.parent("li").hasClass("checked")){								setTreeClassChecked(e, false);							}else{								setTreeClassUnChecked(e, false);							}						});						checkRelationForeach(span);						showCount();												setTimeout(function(){							_loading('loading', 'hide');						}, 50)					}				});			}		})				_loading('loading', 'show');		setTimeout(function(){			$.ajax({//loading异步				type:"get",				url:"../data/async.json?t=" + new Date().getTime(),				async:true,				success:function(){					$(".tw-usertree-list li").each(function(i,e){						var _id =  $(this).attr("data-id");						openTreeById_rightToLeft(_cache['#ownOrg'], _id);						openTreeById(_cache['#allOrg'], _id);						isTreeClassChecked(_id);					})					showCount();										setTimeout(function(){						_loading('loading', 'hide');					}, 50)				}			});		}, 150)				// $('#ownOrg').treeview({		// 	'data' : "/assets-common/plugins/jquery.treeview/data/tree.json"		// })	});</script></body></html>